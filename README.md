# SlimeVR CH59X 移植项目

# 目的：实现低成本的Smol SlimeVR方案

# 注：该项目还属于测试阶段

<div align="center">

**版本**: v0.6.2  | **日期**: 2026-01-25 | **芯片**: CH591/CH592

[![固件版本](https://img.shields.io/badge/固件-v0.6.2-blue.svg)](https://github.com)
[![架构](https://img.shields.io/badge/架构-RISC--V-green.svg)](https://github.com)
[![协议](https://img.shields.io/badge/协议-SlimeVR-orange.svg)](https://github.com)

</div>

---

## 目录

- [概述](#概述)
- [核心特性](#核心特性)
- [RF通讯协议架构](#rf通讯协议架构)
- [模块功能详解](#模块功能详解)
- [快速开始](#快速开始)
- [配置选项](#配置选项)
- [性能指标](#性能指标)
- [固件版本信息](#固件版本信息)
- [文档](#文档)

---

## 概述

这是一个完整的 **SlimeVR 动作追踪器固件**实现，使用 **WCH CH59X 系列芯片**，采用**私有 2.4GHz RF 协议**实现 Tracker 与 Receiver 之间的无线通信。

### v0.6.0 产品化里程碑

v0.6.0 是产品化完整版，完成了全部优化里程碑：

| 里程碑 | 状态 | 说明 |
|:------|:----:|:-----|
| 10 Tracker @200Hz 稳定运行 | 完成 | 支持最多10个Tracker同时运行 |
| WOM深睡眠唤醒 | 完成 | 续航质变，功耗优化 |
| nRF packet语义兼容 | 完成 | 完全兼容nRF格式 |
| 动态信道黑名单 | 完成 | 干扰自适应，自动避让 |
| 事件日志与崩溃快照 | 完成 | 完善的诊断系统 |
| RF自愈闭环 | 完成 | 掉线自动恢复 |

---

## 核心特性

### 已实现功能

#### 传感器支持
- **IMU传感器**: 9种型号
  - `ICM45686`, `ICM42688`, `IIM42652`
  - `BMI270`, `BMI323`
  - `LSM6DSV`, `LSM6DSR`, `LSM6DSO`
  - `SC7I22`
- **磁力计**: 4种型号
  - `QMC5883P`, `HMC5883L`, `HMC5983`, `IIS2MDC`

#### 核心功能
- **传感器融合**: VQF/EKF 算法，支持 6DOF/9DOF
- **私有RF协议**: 2.4GHz, 2Mbps, TDMA 时分多址
- **USB HID**: SlimeVR 协议兼容 + nRF packet 语义
- **USB Bootloader**: UF2 拖放更新
- **USB调试**: 实时数据流和诊断
- **自动校准**: 运动中持续校准陀螺仪偏移
- **温度补偿**: 陀螺仪漂移修正
- **功耗优化**: WOM深睡眠 + 静止降速
- **快速唤醒**: Retained State 状态恢复
- **诊断系统**: 丢包统计/RSSI 监控

### 可选功能

- **OTA更新**: 使用 `make OTA=1` 启用

### 计划中

- BLE 模式
- 多 Receiver 同步

---

## RF通讯协议架构

### TDMA超帧结构

本固件采用**时分多址(TDMA)协议**，实现多Tracker与Receiver之间的同步通信。

```
时间轴 ──────────────────────────────────────────────────────────────>
       0μs    250μs   650μs   1050μs  1450μs  ...  4450μs  4700μs  5000μs
       │       │       │       │       │            │       │       │
       ▼       ▼       ▼       ▼       ▼            ▼       ▼       ▼
超帧 ┌─────────────────────────────────────────────────────────────────┐
     │                                                                 │
     │ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐      ┌──────┐ ┌────┐ ┌──┐   │
     │ │ Sync │ │ T0   │ │ T1   │ │ T2   │ ...  │ T9   │ │Grd │ │Hop│  │
     │ │Beacon│ │Data  │ │Data  │ │Data  │      │Data  │ │200μ│ │50μ│  │
     │ │ 250μs│ │ 400μs│ │ 400μs│ │ 400μs│      │ 400μs│ │s   │ │s  │  │
     │ └──────┘ └──────┘ └──────┘ └──────┘      └──────┘ └────┘ └──┘   │
     │    │        │        │        │              │        │     │   │
     │    │        │        │        │              │        │     │   │
     │    ▼        ▼        ▼        ▼              ▼        ▼     ▼   │
     │ Receiver  Tracker  Tracker  Tracker        Tracker  保护  跳频   │
     │ 广播同步   0发送    1发送    2发送          9发送    间隔  切换    │
     │                                                                 │
     └─────────────────────────────────────────────────────────────────┘
     总时长: 5000μs (5ms) = 200Hz更新率
```

### 时隙分配说明

| 时隙类型 | 时长 | 说明 |
|:--------|:-----|:-----|
| **同步信标** (Sync Beacon) | 250μs | Receiver在每个超帧开始时广播，包含帧号、活跃Tracker掩码、跳频信道映射 |
| **数据时隙** (Data Slot) | 400μs/个 | 每个Tracker分配一个专用时隙<br>- 数据传输: 300μs (可传输~75字节@2Mbps)<br>- ACK响应: 50μs<br>- 切换时间: 50μs |
| **保护间隔** (Guard Time) | 200μs | 防止时隙边界冲突，提供时间裕量 |
| **跳频切换** (Hop Time) | 50μs | 信道切换时间，下一个超帧使用新信道 |

### 通信流程示意图

```
┌─────────────┐                    ┌─────────────┐
│  Receiver   │                    │   Tracker   │
│  (Dongle)   │                    │  (最多10个)  │
└──────┬──────┘                    └──────┬──────┘
       │                                   │
       │  ┌─────────────────────────┐   │
       │  │  超帧开始 (每5ms)          │   │
       │  └─────────────────────────┘   │
       │                                   │
       │  ┌──────────────────────────┐   │
       │──┤ 1. 广播同步信标 (Sync)     │───┤ 接收同步信标
       │  │   - 帧号                   │   │  - 同步时间
       │  │   - 活跃Tracker掩码        │   │  - 获取信道映射
       │  │   - 跳频信道映射           │   │  - 更新帧号
       │  └──────────────────────────┘   │
       │                                   │
       │  ┌──────────────────────────┐   │
       │  │  等待时隙0 (Tracker 0)    │   │
       │  └──────────────────────────┘   │
       │                                   │
       │                                   │  ┌─────────────────────┐
       │                                   │──┤ 2. Tracker 0发送数据 │
       │                                   │  │   - 四元数           │
       │  ┌──────────────────────────┐   │  │   - 加速度           │
       │──┤ 3. 接收数据 + 发送ACK      │◄──│  │   - 电池/状态        │
       │  │   - 校验CRC                │   │  └─────────────────────┘
       │  │   - 更新Tracker状态        │   │
       │  │   - 发送ACK确认            │   │
       │  └──────────────────────────┘   │
       │                                   │
       │  ... (重复时隙1-9)                │  ... (Tracker 1-9)
       │                                   │
       │  ┌──────────────────────────┐   │
       │  │  保护间隔 + 跳频切换       │   │
       │  └──────────────────────────┘   │
       │                                   │
       │  ┌──────────────────────────┐   │
       │  │  下一个超帧 (新信道)      │   │
       │  └──────────────────────────┘   │
```

### 跳频机制

系统使用 **5信道跳频序列**，每个超帧切换一次信道，避开WiFi干扰：

```
超帧0: 信道8  ──┐
超帧1: 信道13 ──┤
超帧2: 信道18 ──┤  跳频序列 (避开WiFi 1/6/11)
超帧3: 信道33 ──┤
超帧4: 信道38 ──┘
超帧5: 信道8  ──┐  (循环)
...
```

### 配对流程

```
Tracker                    Receiver
   │                          │
   │  ┌──────────────────┐    │
   │──┤ 配对请求          │───┤
   │  │ (MAC地址)         │   │
   │  └──────────────────┘    │
   │                          │
   │  ┌──────────────────┐    │
   │◄─┤ 配对响应          │───┤
   │  │ (Tracker ID)     │    │
   │  │ (网络密钥)        │   │
   │  └──────────────────┘   │
   │                          │
   │  ┌──────────────────┐    │
   │──┤ 配对确认          │───┤
   │  │ (确认ID)          │   │
   │  └──────────────────┘    │
   │                          │
   │  ┌──────────────────┐    │
   │◄─┤ 开始正常通信      │───┤
   │  │ (同步信标)         │   │
   │  └──────────────────┘    │
```

### 数据包格式

#### 同步信标 (Receiver → All Trackers)
```
┌──────┬──────┬──────────┬──────────┬──────────┬──────┐
│ Type │ Len  │ Frame #  │ Active   │ Channel  │ CRC  │
│ 0x01 │  16  │  (16bit) │ Mask(16) │  Map(5)  │(16)  │
└──────┴──────┴──────────┴──────────┴──────────┴──────┘
```

#### Tracker数据包 (Tracker → Receiver)
```
┌──────┬──────┬──────┬──────┬──────────┬──────────┬──────────┬──────┐
│ Type │ Len  │ ID   │ Seq  │ Quat(64) │ Accel(48)│ Bat/Flag │ CRC  │
│ 0x10 │  32  │(8bit)│(8bit)│  (8B)    │  (6B)    │  (2B)    │(16)  │
└──────┴──────┴──────┴──────┴──────────┴──────────┴──────────┴──────┘
```

#### ACK确认包 (Receiver → Tracker)
```
┌──────┬──────┬──────┬──────────┬──────┬──────┐
│ Type │ Len  │ ID   │ ACK Seq  │ Cmd  │ CRC  │
│ 0x30 │  8   │(8bit)│  (8bit)  │(8bit)│(16)  │
└──────┴──────┴──────┴──────────┴──────┴──────┘
```

### 性能参数

| 参数 | 数值 | 说明 |
|:-----|:-----|:-----|
| **超帧周期** | 5ms | 200Hz更新率 |
| **同步信标** | 250μs | Receiver广播 |
| **数据时隙** | 400μs | 每个Tracker |
| **数据传输** | 300μs | 有效数据时间 |
| **ACK响应** | 50μs | 确认时间 |
| **保护间隔** | 200μs | 时隙保护 |
| **跳频时间** | 50μs | 信道切换 |
| **最大Tracker数** | 10个 | 保证200Hz稳定 |
| **通信延迟** | <5ms | 端到端延迟 |
| **数据速率** | 2Mbps | RF物理层速率 |

---

## 模块功能详解

### Tracker 固件模块

#### 传感器处理系统
- **采样频率**: 200Hz (5ms周期)
- **读取模式**:
  - **标准模式**: 直接I2C/SPI读取
  - **优化模式**: FIFO缓冲 + 后台处理 (`USE_SENSOR_OPTIMIZED`)
  - **DMA模式**: DMA直接内存访问 (`USE_SENSOR_DMA`, 待完善)

#### 传感器融合算法
支持多种融合算法，可通过 `FUSION_TYPE` 配置:

| 算法 | 说明 |
|:-----|:-----|
| **VQF Ultra** | 超高性能融合 |
| **VQF Advanced** | 高级融合 (默认) |
| **VQF Opt** | 优化版本 |
| **VQF Simple** | 简化版本 |
| **EKF AHRS** | 扩展卡尔曼滤波 |

**融合功能**:
- 6DOF融合: 陀螺仪 + 加速度计
- 9DOF融合: 陀螺仪 + 加速度计 + 磁力计 (可选)
- 四元数输出
- 线性加速度计算 (移除重力影响)

#### 传感器数据处理
- **陀螺仪滤波** (`gyro_noise_filter`):
  - 中值滤波
  - 移动平均滤波
  - 卡尔曼滤波 (可选)
  - 静止检测
  
- **温度补偿** (`temp_compensation`):
  - 陀螺仪温漂补偿
  - 温度估计和校正
  
- **自动校准** (`auto_calibration`):
  - 运动中自动校准陀螺仪偏移
  - 动态偏置估计

- **磁力计支持** (`mag_interface`):
  - 航向校正
  - 磁力计校准
  - 9DOF融合增强

#### RF通信系统
- **RF协议**:
  - TDMA时隙分配
  - 同步信标接收
  - 数据包重传机制
  - RSSI信号强度监测
  
- **RF优化模块** (v0.6.2):
  - **智能信道管理** (`channel_manager`): CCA检测 + 自动避让 + 黑名单
  - **RF自愈机制** (`rf_recovery`): 通信中断自动恢复
  - **时隙优化器** (`rf_slot_optimizer`): 动态分配 + 优先级调度
  - **时序优化** (`rf_timing_opt`): 精确同步 + 延迟补偿
  - **RF Ultra模式** (`rf_ultra`): 极限性能模式

- **配对功能**:
  - 自动配对流程
  - 配对数据持久化存储
  - 网络密钥管理

#### 电源管理
- **功耗优化** (`power_optimizer`):
  - 动态时钟调整
  - 睡眠调度
  - 自动睡眠 (静止超时)
  
- **睡眠模式**:
  - **浅睡眠** (light sleep): 保持RAM状态
  - **深睡眠** (deep sleep): 最大功耗节省
  - **状态保持** (retained_state): 睡眠后状态恢复

- **电池管理**:
  - ADC电池电压监测
  - 充电状态检测
  - 低电量警告

#### 系统监控与诊断
- **看门狗** (`watchdog`):
  - 硬件看门狗 (2秒超时)
  - 任务监控 (软件层面)
  - 复位原因检测
  - HardFault处理
  
- **事件日志** (`event_logger`):
  - 系统事件记录
  - 故障快照保存
  
- **诊断统计** (`diagnostics`):
  - 性能监控
  - 故障排查
  - 统计信息收集

#### USB功能
- **USB Bootloader** (`usb_bootloader`):
  - UF2格式固件更新
  - USB MSC模式
  - 拖放升级支持
  
- **USB调试接口** (`usb_debug`):
  - 实时数据流 (四元数、传感器数据)
  - 状态查询
  - 配置修改
  - 诊断命令

- **USB大容量存储** (`usb_msc`):
  - UF2固件更新
  - 文件系统访问

### Receiver 固件模块

#### RF接收系统
- **多追踪器管理**: 最多支持24个追踪器
- **TDMA同步**:
  - 5ms超帧周期
  - 同步信标广播
  - 时隙分配管理
  
- **数据接收**:
  - 数据包解析
  - CRC校验
  - 序列号检测
  - 丢包统计

- **RF优化** (v0.6.2):
  - 智能信道管理
  - RF自愈机制
  - 时隙优化
  - 时序优化
  - RF Ultra模式支持

#### USB HID通信
- **SlimeVR协议兼容**:
  - Legacy格式 (Report ID 0x01)
  - Packet0格式 (设备信息)
  - Packet1格式 (传感器数据)
  - Packet3格式 (状态信息)
  
- **数据格式**:
  - 64字节HID报告
  - 每个追踪器10字节数据
  - 200Hz更新频率 (5ms周期)

- **USB命令**:
  - `0x10`: 进入Bootloader
  - `0x11`: 进入配对模式
  - `0x12`: 退出配对模式
  - `0x20`: 请求版本信息

#### 追踪器管理
- **追踪器数据结构**:
  - 四元数 (Q15格式)
  - 线性加速度 (mg)
  - 电池电量
  - 状态标志
  - RSSI信号强度
  
- **统计信息**:
  - 总接收包数
  - 丢失包数
  - 重传次数
  - 超时次数
  - CRC错误次数
  - 丢包率 (滑动平均)

- **超时管理**: 1秒无数据认为离线

#### 配对系统
- **配对流程**:
  - 接收配对请求
  - 分配Tracker ID
  - 网络密钥交换
  - 配对数据保存
  
- **配对超时**: 60秒

#### 系统监控
- **看门狗**: 硬件看门狗 + 任务监控
- **复位原因检测**: 区分上电/看门狗/软复位

#### USB功能
- **USB Bootloader**: UF2固件更新
- **USB HID**: SlimeVR协议通信

### Bootloader 模块

| 项目 | 数值 |
|:-----|:-----|
| **大小** | 468 bytes (最大4096 bytes) |
| **启动地址** | 0x0000 |
| **应用地址** | 0x1000 |
| **功能** | UF2支持、Flash操作、启动跳转 |

### HAL (硬件抽象层) 模块

#### 已实现的HAL模块

| 模块 | 功能 |
|:-----|:-----|
| **GPIO** (`hal_gpio`) | GPIO配置、读写、中断、按键处理 |
| **I2C** (`hal_i2c`) | I2C初始化、寄存器读写、多字节传输 |
| **SPI** (`hal_spi`) | SPI初始化、单字节传输、片选控制 |
| **Timer** (`hal_timer`) | 定时器初始化、微秒/毫秒延时、时间戳获取 |
| **Storage** (`hal_storage`) | Flash存储、数据读写、擦除操作 |
| **Power** (`hal_power`) | 电源管理、睡眠模式、时钟控制 |
| **Watchdog** (`hal_watchdog`) | 看门狗初始化、喂狗、复位原因检测 |
| **DMA** (`hal_dma`) | DMA初始化 (部分实现)、SPI/I2C DMA传输 (待完善) |
| **Charging** (`hal_charging`) | 充电检测、电池管理 |

### 运行状态机

#### Tracker 状态机

| 状态 | 说明 |
|:-----|:-----|
| **STATE_PAIRING** | 配对状态: 等待接收器配对请求 |
| **STATE_SEARCH_SYNC** | 搜索同步: 搜索接收器同步信标 |
| **STATE_RUNNING** | 运行状态: 正常数据发送 |
| **STATE_CALIBRATING** | 校准状态: 陀螺仪偏置校准 (500个样本, 2.5秒@200Hz) |
| **STATE_SLEEPING** | 睡眠状态: 低功耗睡眠 |
| **STATE_BOOTLOADER** | Bootloader状态: USB固件更新模式 |
| **STATE_ERROR** | 错误状态: 错误处理和LED指示 |

#### Receiver 状态机

| 状态 | 说明 |
|:-----|:-----|
| **STATE_RUNNING** | 运行状态: 正常数据接收和转发 |
| **STATE_PAIRING** | 配对状态: 等待追踪器配对请求 (60秒超时) |
| **STATE_BOOTLOADER** | Bootloader状态: USB固件更新模式 |
| **STATE_ERROR** | 错误状态: 错误处理和LED指示 |

### 编译配置选项

#### 功能开关 (`config.h`)

| 宏定义 | 功能说明 |
|:-------|:--------|
| `USE_SENSOR_OPTIMIZED`  | 优化传感器读取 (FIFO+后台) |
| `USE_SENSOR_DMA`        | DMA传感器读取 |
| `USE_USB_DEBUG`         | USB调试接口 |
| `USE_DIAGNOSTICS`       | 诊断统计 |
| `USE_CHANNEL_MANAGER`   | 智能信道管理 |
| `USE_RF_RECOVERY`       | RF自愈机制 |
| `USE_RF_SLOT_OPTIMIZER` | 时隙优化器 |
| `USE_RF_TIMING_OPT`     | 时序优化 |
| `USE_RF_ULTRA`          | RF Ultra模式 |
| `USE_USB_MSC`           | USB大容量存储 |
| `USE_MAGNETOMETER`      | 磁力计支持 |

#### 融合算法选择

| 算法类型 | 说明 |
|:---------|:-----|
| `FUSION_VQF_ULTRA` | VQF Ultra算法 |
| `FUSION_VQF_ADVANCED` | VQF Advanced算法 (默认) |
| `FUSION_VQF_OPT` | VQF Opt算法 |
| `FUSION_VQF_SIMPLE` | VQF Simple算法 |
| `FUSION_EKF` | EKF算法 |

---

## 快速开始

### 1. 环境准备

```bash
# 安装 RISC-V 工具链
sudo apt install gcc-riscv64-unknown-elf

# 或使用 WCH 提供的工具链
# MounRiver Studio: http://www.mounriver.com/
```

### 2. 编译固件

```bash
# 完整编译 (Bootloader + Tracker + Receiver)
./build.sh all

# 仅编译 Tracker
./build.sh tracker

# 仅编译 Receiver
./build.sh receiver

# 指定芯片
./build.sh -c CH591

# 启用OTA
make OTA=1
```

### 3. 烧录固件

```bash
# 使用 WCH-Link
wchisp flash output/tracker_CH592_v0.4.13_combined.hex

# 使用 WCHISPTool (Windows GUI)
# 选择合并后的HEX文件
```

### 4. USB DFU更新

1. 按住 **BOOT** 按键开机
2. 电脑识别为 **U盘**
3. 拖放 **UF2文件** 到U盘
4. 自动更新并重启

---

## 目录结构

```
slimevr_ch59x/
├── bootloader/          # 4KB独立Bootloader
│   ├── src/
│   ├── Link_boot.ld
│   └── Makefile
├── src/
│   ├── main_tracker.c   # Tracker主程序
│   ├── main_receiver.c  # Receiver主程序
│   ├── sensor/          # 传感器驱动
│   │   ├── imu/         # IMU驱动 (9种)
│   │   ├── fusion/      # 融合算法
│   │   └── *.c          # 接口层
│   ├── rf/              # RF协议
│   ├── usb/             # USB驱动
│   ├── hal/             # 硬件抽象层
│   └── deprecated/      # 归档代码
├── include/             # 头文件
├── sdk/                 # CH592 SDK
├── docs/                # 文档
├── tools/               # 工具脚本
├── output/              # 编译输出
├── build.sh              # 主构建入口
├── scripts/
│   ├── build/           # 构建脚本目录
│   └── test/           # 测试脚本目录
├── Makefile             # 主Makefile
└── README.md
```

---

## 内存布局

```
Flash (448KB):
┌─────────────────┐ 0x00000
│   Bootloader    │ 4KB
├─────────────────┤ 0x01000
│   Application   │ ~220KB
├─────────────────┤ 0x38000
│   OTA Partition │ ~220KB (可选)
└─────────────────┘ 0x70000

RAM (26KB):
┌─────────────────┐ 0x20000000
│      Stack      │ 2KB
├─────────────────┤
│      Heap       │ 2KB
├─────────────────┤
│      Data       │ ~6KB
└─────────────────┘
```

---

## 配置选项

### 编辑 `include/config.h`

```c
// IMU选择
#define IMU_TYPE    IMU_ICM45686

// RF功率 (dBm)
#define RF_TX_POWER_DBM     4

// 采样率 (Hz)
#define RF_DATA_RATE_HZ     200

// 最大Tracker数 (v0.5.0固定为10，保证200Hz稳定)
#define MAX_TRACKERS        10

// 自动睡眠超时 (v0.5.0: 60秒)
#define AUTO_SLEEP_TIMEOUT_MS   60000
```

### 编译时选项

```bash
# 选择特定IMU
make IMU=ICM45686

# 选择芯片
make CHIP=CH591

# 启用OTA
make OTA=1

# 启用LTO优化
make LTO_FLAGS=-flto
```

---

## 性能指标

### Tracker 固件

| 指标 | 数值 |
|:-----|:-----|
| **Flash使用** | ~62KB (text: 62456 bytes) |
| **RAM使用** | ~8KB (data: 556 bytes, bss: 7620 bytes) |
| **传感器采样** | 200Hz |
| **RF发送频率** | 200Hz |
| **传感器延迟** | <3ms |
| **RF延迟** | <5ms |
| **功耗 (运动)** | <15mA @200Hz |
| **功耗 (静止)** | <5mA @50Hz |
| **功耗 (深睡眠)** | <10uA |
| **唤醒响应** | <500ms |
| **姿态收敛** | <2s |

### Receiver 固件

| 指标 | 数值 |
|:-----|:-----|
| **Flash使用** | ~38KB (text: 37968 bytes) |
| **RAM使用** | ~6.5KB (data: 548 bytes, bss: 6056 bytes) |
| **USB发送频率** | 200Hz |
| **追踪器数量** | 最多24个 |
| **数据更新率** | 200Hz (5ms周期) |

### Bootloader

| 指标 | 数值 |
|:-----|:-----|
| **Flash使用** | 468 bytes |
| **最大限制** | 4096 bytes |

---

## 固件版本信息

| 项目 | 信息 |
|:-----|:-----|
| **版本** | v0.6.2 |
| **协议版本** | SlimeVR Protocol (兼容nRF格式) |
| **编译日期** | 2026-01-28 |
| **工具链** | xpack-riscv-none-elf-gcc 15.2.0 |
| **架构** | RISC-V rv32imac_zicsr_zifencei |
| **MCU** | CH592 (RISC-V) |

---

## 主要改进 (v0.6.2)

### 新增功能

1. **智能信道管理**: CCA检测 + 自动避让 + 黑名单
2. **RF自愈机制**: 通信中断自动恢复
3. **时隙优化器**: 动态分配 + 优先级调度
4. **时序优化**: 精确同步 + 延迟补偿
5. **RF Ultra模式**: 极限性能模式
6. **优化传感器读取**: FIFO + 后台处理
7. **USB调试接口**: 实时数据流和诊断
8. **诊断统计**: 性能监控和故障排查
9. **温度补偿**: 陀螺仪温漂补偿
10. **自动校准**: 运动中自动校准
11. **静止检测**: 陀螺仪滤波和静止检测
12. **状态保持**: 睡眠后状态恢复
13. **磁力计支持**: 航向校正

### 系统增强

- 看门狗和故障恢复
- 事件日志系统
- 功耗优化
- USB大容量存储 (UF2)

---

## 文档

- [功能状态](docs/IMPLEMENTED_FEATURES.md)
- [模块状态](docs/MODULE_STATUS.md)
- [编译指南](docs/BUILD_GUIDE.md)
- [用户指南](docs/USER_GUIDE.md)
- [RF协议规范](docs/RF_PROTOCOL_SPEC.md)
- [硬件设计](docs/HARDWARE_DESIGN.md)

---

## 许可证

**MIT License**

---

## 致谢

- **SlimeVR项目** - 开源VR追踪系统
- **WCH官方SDK** - CH59X芯片支持
- **nRF52 Receiver参考实现** - 协议兼容性参考

---

<div align="center">

**SlimeVR CH59X 私有RF固件 v0.6.2**

*最后更新: 2026-01-28*

</div>
